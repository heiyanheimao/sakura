<!DOCTYPE html>
<html class="x-admin-sm">
{include file="public/header" /}

<body>
	<div class="x-nav">
		<span class="layui-breadcrumb">
			<a href="">首页</a>
			<a href="">用户管理</a>
			<a>
				<cite>系统用户</cite></a>
		</span>
		<a class="layui-btn layui-btn-small" style="line-height:1.6em;margin-top:3px;float:right"
			onclick="location.reload()" title="刷新">
			<i class="layui-icon layui-icon-refresh" style="line-height:30px"></i></a>
	</div>
	<div class="layui-fluid">
		<div class="layui-row layui-col-space15">
			<div class="layui-col-md12">
				<div class="layui-card">
					<div class="layui-card-body ">
						<form class="layui-form layui-col-space5">
							<div class="layui-inline layui-show-xs-block">
								<input type="text" name="admin_name" id="admin_name" placeholder="请输入管理员名称" autocomplete="off"
									class="layui-input">
							</div>
							<div class="layui-inline layui-show-xs-block">
								<input type="text" name="admin_account" id="admin_account" placeholder="请输入管理员账号" autocomplete="off"
									class="layui-input">
							</div>
							<div class="layui-inline layui-show-xs-block">
								<button class="layui-btn" type="button" onclick="search();"><i class="layui-icon">&#xe615;</i></button>
							</div>
						</form>
					</div>
					<div class="layui-card-header">
						<button class="layui-btn layui-btn-danger" onclick="delAll()"><i class="layui-icon"></i>批量删除</button>
						<button class="layui-btn" onclick="xadmin.open('添加用户','./member-add.html',600,400)"><i
								class="layui-icon"></i>添加</button>
					</div>
					<div class="layui-card-body layui-table-body layui-table-main">
						<table class="layui-table layui-form">
							<thead>
								<tr>
									<th>
										<input type="checkbox" lay-filter="checkall" name="" lay-skin="primary">
									</th>
									<th>ID</th>
									<th>账号</th>
									<th>名称</th>
									<th>管理员类型</th>
									<th>权限</th>
									<th>创建时间</th>
									<th>状态</th>
									<th>操作</th>
								</tr>
							</thead>
							<tbody>
								<!-- <tr>
									<td>
										<input type="checkbox" name="id" value="1" lay-skin="primary">
									</td>
									<td>1</td>
									<td>小明</td>
									<td>男</td>
									<td>13000000000</td>
									<td>北京市 海淀区</td>
									<td class="td-status">
										<span class="layui-btn layui-btn-normal layui-btn-mini">已启用</span></td>
									<td class="td-manage">
										<a onclick="member_stop(this,'10001')" href="javascript:;" title="启用">
											<i class="layui-icon">&#xe601;</i>
										</a>
										<a title="编辑" onclick="xadmin.open('编辑','member-edit.html',600,400)" href="javascript:;">
											<i class="layui-icon">&#xe642;</i>
										</a>
										<a onclick="xadmin.open('修改密码','member-password.html',600,400)" title="修改密码" href="javascript:;">
											<i class="layui-icon">&#xe631;</i>
										</a>
										<a title="删除" onclick="member_del(this,'要删除的id')" href="javascript:;">
											<i class="layui-icon">&#xe640;</i>
										</a>
									</td>
								</tr> -->
							</tbody>
						</table>
					</div>
					<div class="layui-card-body ">
						<div class="page">
							<div>
								<a class="prev" href="">&lt;&lt;</a>
								<a class="num" href="">1</a>
								<span class="current">2</span>
								<a class="num" href="">3</a>
								<a class="num" href="">489</a>
								<a class="next" href="">&gt;&gt;</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
<script>
	layui.use(['laydate', 'form', 'jquery'], function () {
		// var laydate = layui.laydate;
		var form = layui.form;
		var $ = layui.jquery;
		var admin_account = $('#admin_account').val();
		var admin_name = $('#admin_name').val();
		var page = 1;
		// $.ajax({
		// 	//请求方式
		// 	type: "POST",
		// 	//请求的媒体类型
		// 	dataType: "JSON",
		// 	//请求地址
		// 	url: "/back/admin/getList",
		// 	//数据，json字符串
		// 	data: { admin_account: admin_account, admin_name: admin_name, page: page },
		// 	//请求成功
		// 	success: function (rtn) {
		// 		// layer.confirm('确认要删除吗？',function(index){
		// 		//     //发异步删除数据
		// 		//     // $(obj).parents("tr").remove();
		// 		//     // layer.msg('已删除!',{icon:1,time:1000});
		// 		// });
		// 		if (rtn.code === 500) {
		// 			layer.alert(rtn.msg, { icon: 2, closeBtn: 0 }, function (index) {
		// 				//关闭弹窗
		// 				layer.close(index);
		// 				parent.location.href = './login.html';
		// 			});
		// 		} else if (rtn.code === 401) {
		// 			$('tbody').html('<tr><td colspan="9" style="text-align:center">暂无数据</td></tr>');
		// 		} else if (rtn.code === 200) {
		// 			html = '';
		// 			for (i in rtn.data.list) {
		// 				html += '<tr>'
		// 				html += '<td><input type="checkbox" name="id" value="' + rtn.data.list[i].admin_id + '" lay-skin="primary"><div class="layui-unselect layui-form-checkbox layui-form-checked" lay-skin="primary"><i class="layui-icon layui-icon-ok"></i></div></td>'
		// 				// html += '<input type="checkbox" name="id" value="' + rtn.data.list[i].admin_id + '" lay-skin="primary">'
		// 				// html += '</td>'
		// 				html += '<td>' + rtn.data.list[i].admin_id + '</td>'
		// 				html += '<td>' + rtn.data.list[i].admin_account + '</td>'
		// 				html += '<td>' + rtn.data.list[i].admin_name + '</td>'
		// 				html += '<td>' + rtn.data.list[i].admin_id + '</td>'
		// 				html += '<td>' + rtn.data.list[i].admin_id + '</td>'
		// 				html += '<td>' + rtn.data.list[i].admin_id + '</td>'
		// 				html += '<td>' + rtn.data.list[i].admin_id + '</td>'
		// 				html += '<td>' + rtn.data.list[i].admin_id + '</td>'
		// 				html += '</tr><tbody>'
		// 			// 	// 	<td>小明</td>
		// 			// 	// 	<td>男</td>
		// 			// 	// 	<td>13000000000</td>
		// 			// 	// 	<td>北京市 海淀区</td>
		// 			// 	// 	<td class="td-status">
		// 			// 	// 		<span class="layui-btn layui-btn-normal layui-btn-mini">已启用</span></td>
		// 			// 	// 	<td class="td-manage">
		// 			// 	// 		<a onclick="member_stop(this,'10001')" href="javascript:;" title="启用">
		// 			// 	// 			<i class="layui-icon">&#xe601;</i>
		// 			// 	// 		</a>
		// 			// 	// 		<a title="编辑" onclick="xadmin.open('编辑','member-edit.html',600,400)" href="javascript:;">
		// 			// 	// 			<i class="layui-icon">&#xe642;</i>
		// 			// 	// 		</a>
		// 			// 	// 		<a onclick="xadmin.open('修改密码','member-password.html',600,400)" title="修改密码" href="javascript:;">
		// 			// 	// 			<i class="layui-icon">&#xe631;</i>
		// 			// 	// 		</a>
		// 			// 	// 		<a title="删除" onclick="member_del(this,'要删除的id')" href="javascript:;">
		// 			// 	// 			<i class="layui-icon">&#xe640;</i>
		// 			// 	// 		</a>
		// 			// 	// 	</td>
		// 			// 	// </tr>'
		// 			}
		// 			$('thead').html(html);
		// 		} else {
		// 			layer.alert(rtn.msg, { icon: 0, closeBtn: 0 }, function (index) {
		// 				//关闭弹窗
		// 				layer.close(index);
		// 			});
		// 		}
		// 	},
		// 	//请求失败，包含具体的错误信息
		// 	error: function (e) {
		// 		console.log(e.status);
		// 		console.log(e.responseText);
		// 	}
		// });
		// 监听全选
		form.on('checkbox(checkall)', function (data) {
			console.log(1);
			if (data.elem.checked) {
				$('tbody input').prop('checked', true);
			} else {
				$('tbody input').prop('checked', false);
			}
			form.render('checkbox');
		});

		// //执行一个laydate实例
		// laydate.render({
		// 	elem: '#start' //指定元素
		// });

		// //执行一个laydate实例
		// laydate.render({
		// 	elem: '#end' //指定元素
		// });


	});

	/*搜索*/
	function search() {
		console.log($('#admin_name').val());
	}

	/*用户-停用*/
	function member_stop(obj, id) {
		layer.confirm('确认要停用吗？', function (index) {

			if ($(obj).attr('title') == '启用') {

				//发异步把用户状态进行更改
				$(obj).attr('title', '停用')
				$(obj).find('i').html('&#xe62f;');

				$(obj).parents("tr").find(".td-status").find('span').addClass('layui-btn-disabled').html('已停用');
				layer.msg('已停用!', { icon: 5, time: 1000 });

			} else {
				$(obj).attr('title', '启用')
				$(obj).find('i').html('&#xe601;');

				$(obj).parents("tr").find(".td-status").find('span').removeClass('layui-btn-disabled').html('已启用');
				layer.msg('已启用!', { icon: 5, time: 1000 });
			}

		});
	}



	/*用户-删除*/
	function member_del(obj, id) {
		layer.confirm('确认要删除吗？', function (index) {
			//发异步删除数据
			$(obj).parents("tr").remove();
			layer.msg('已删除!', { icon: 1, time: 1000 });
		});
	}



	function delAll(argument) {
		var ids = [];

		// 获取选中的id 
		$('tbody input').each(function (index, el) {
			if ($(this).prop('checked')) {
				ids.push($(this).val())
			}
		});

		layer.confirm('确认要删除吗？' + ids.toString(), function (index) {
			//捉到所有被选中的，发异步进行删除
			layer.msg('删除成功', { icon: 1 });
			$(".layui-form-checked").not('.header').parents('tr').remove();
		});
	}
</script>

</html>